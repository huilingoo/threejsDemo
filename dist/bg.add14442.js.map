{"version":3,"sources":["main/crystalBall/bg.js"],"names":["canvas","document","getElementById","ctx","getContext","aw","documentElement","clientWidth","body","ah","clientHeight","width","height","count","images","imgNum","textW","textH","topStars","stars","init","loadImgs","requestAnimationFrame","animate","i","push","TopStar","Star","img","Image","src","sources","starshaow","text","leaf","loadImages","clearRect","drawImage","save","scale","translate","restore","length","draw","update","x","w","y","angle","getRandom","rotateDir","prototype","centerX","centerY","rotate","Math","PI","beginPath","setLineDash","moveTo","lineTo","lineWidth","strokeStyle","stroke","starSize","maxSize","dir","starSpeed","color","fillStyle","fill","callback","onload","n","m","floor","random"],"mappings":"AAAA,IAAMA,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC;AAC5C,IAAMC,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;;AAEnC;AACA,IAAIC,EAAE,GAAGJ,QAAQ,CAACK,eAAe,CAACC,WAAW,IAAIN,QAAQ,CAACO,IAAI,CAACD,WAAW;AAC1E,IAAIE,EAAE,GAAGR,QAAQ,CAACK,eAAe,CAACI,YAAY,IAAIT,QAAQ,CAACO,IAAI,CAACE,YAAY;AAC5EV,MAAM,CAACW,KAAK,GAAGN,EAAE;AACjBL,MAAM,CAACY,MAAM,GAAGH,EAAE;;AAElB;AACA,IAAII,KAAK,GAAG,CAAC;EAACC,MAAM,GAAG,CAAC,CAAC;EAACC,MAAM,GAAG,CAAC;AACpC;AACA,IAAIC,KAAK,GAAG,GAAG;EAAEC,KAAK,GAAG,EAAE;AAC3B;AACA,IAAIC,QAAQ,GAAG,EAAE;EAAEC,KAAK,GAAG,EAAE;AAE7BC,IAAI,EAAE;AACNC,QAAQ,EAAE;AACVC,qBAAqB,CAACC,OAAO,CAAC;AAE9B,SAASH,IAAI,GAAG;EACZ,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;IACxBN,QAAQ,CAACO,IAAI,CAAC,IAAIC,OAAO,CAAErB,EAAE,GAAG,CAAC,GAAImB,CAAC,GAAG,EAAE,CAAC,CAAC;EACjD;EACA,KAAK,IAAIA,EAAC,GAAG,CAAC,EAAEA,EAAC,GAAG,EAAE,EAAEA,EAAC,EAAE,EAAE;IACzBL,KAAK,CAACM,IAAI,CAAC,IAAIE,IAAI,EAAE,CAAC;EAC1B;AACJ;AAEA,SAASN,QAAQ,GAAG;EAChB,IAAIO,GAAG,GAAG,IAAIC,KAAK,EAAE;EACrBD,GAAG,CAACE,GAAG,GAAG,wBAAwB;EAClC,IAAIC,OAAO,GAAG;IACVC,SAAS,EAAE,wBAAwB;IACnCC,IAAI,EAAE,mBAAmB;IACzBC,IAAI,EAAE;EACV,CAAC;EACD;EACAC,UAAU,CAACJ,OAAO,EAAE,UAAUjB,MAAM,EAAE,CAAE,CAAC,CAAC;AAC9C;AAGA,SAASS,OAAO,GAAG;EACfpB,GAAG,CAACiC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE/B,EAAE,EAAEI,EAAE,CAAC;;EAE3B;EACAN,GAAG,CAACkC,SAAS,CAACvB,MAAM,CAACmB,IAAI,EAAE5B,EAAE,GAAG,CAAC,GAAGW,KAAK,GAAG,CAAC,EAAE,GAAG,EAAEA,KAAK,EAAEC,KAAK,CAAC;EACjE;EACAd,GAAG,CAACmC,IAAI,EAAE,CAAC;EACXnC,GAAG,CAACkC,SAAS,CAACvB,MAAM,CAACoB,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;EAE7C/B,GAAG,CAACoC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EAChBpC,GAAG,CAACqC,SAAS,CAAC,CAACnC,EAAE,EAAE,CAAC,CAAC;EACrBF,GAAG,CAACkC,SAAS,CAACvB,MAAM,CAACoB,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;EAC7C/B,GAAG,CAACsC,OAAO,EAAE,CAAC,CAAC;;EAEf,KAAK,IAAIjB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,QAAQ,CAACwB,MAAM,EAAElB,CAAC,EAAE,EAAE;IACtCN,QAAQ,CAACM,CAAC,CAAC,CAACmB,IAAI,EAAE;IAClBzB,QAAQ,CAACM,CAAC,CAAC,CAACoB,MAAM,EAAE;EACxB;;EAEA;EACA,KAAK,IAAIpB,GAAC,GAAG,CAAC,EAAEA,GAAC,GAAGL,KAAK,CAACuB,MAAM,EAAElB,GAAC,EAAE,EAAE;IACnCL,KAAK,CAACK,GAAC,CAAC,CAACmB,IAAI,EAAE;IACfxB,KAAK,CAACK,GAAC,CAAC,CAACoB,MAAM,EAAE;EACrB;EAEAtB,qBAAqB,CAACC,OAAO,CAAC;AAClC;;AAEA;AACA;AACA;AACA,SAASG,OAAO,CAACmB,CAAC,EAAE;EAChB,IAAI,CAACC,CAAC,GAAG,EAAE;EACX,IAAI,CAACD,CAAC,GAAGA,CAAC;EACV,IAAI,CAACE,CAAC,GAAG,EAAE;EACX,IAAI,CAACC,KAAK,GAAGC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;EAC7B,IAAI,CAACC,SAAS,GAAG,GAAG;AACxB;AAEAxB,OAAO,CAACyB,SAAS,CAACR,IAAI,GAAG,YAAY;EACjCxC,GAAG,CAACmC,IAAI,EAAE,CAAC;EACX,IAAIc,OAAO,GAAG,IAAI,CAACP,CAAC,GAAG,IAAI,CAACC,CAAC,GAAG,CAAC,CAAC,CAAC;EACnC,IAAIO,OAAO,GAAG,CAAC,CAAC,CAAE;EAClBlD,GAAG,CAACqC,SAAS,CAACY,OAAO,EAAEC,OAAO,CAAC,CAAC;EAChClD,GAAG,CAACmD,MAAM,CAAE,IAAI,CAACN,KAAK,GAAGO,IAAI,CAACC,EAAE,GAAI,GAAG,CAAC;EACxCrD,GAAG,CAACqC,SAAS,CAAC,CAACY,OAAO,EAAEC,OAAO,CAAC,CAAC;EACjClD,GAAG,CAACsD,SAAS,EAAE;EACftD,GAAG,CAACuD,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACvBvD,GAAG,CAACwD,MAAM,CAACP,OAAO,EAAE,CAAC,CAAC;EACtBjD,GAAG,CAACyD,MAAM,CAACR,OAAO,EAAE,IAAI,CAACL,CAAC,GAAG,IAAI,CAACD,CAAC,GAAG,CAAC,CAAC;EACxC3C,GAAG,CAAC0D,SAAS,GAAG,GAAG;EACnB1D,GAAG,CAAC2D,WAAW,GAAG,SAAS;EAC3B3D,GAAG,CAAC4D,MAAM,EAAE;EACZ;EACA5D,GAAG,CAACkC,SAAS,CAACvB,MAAM,CAACkB,SAAS,EAAE,IAAI,CAACa,CAAC,EAAE,IAAI,CAACE,CAAC,EAAE,IAAI,CAACD,CAAC,EAAE,IAAI,CAACA,CAAC,CAAC;EAC/D3C,GAAG,CAACsC,OAAO,EAAE,CAAC,CAAC;AACnB,CAAC;;AAEDf,OAAO,CAACyB,SAAS,CAACP,MAAM,GAAG,YAAY;EACnC,IAAI,IAAI,CAACM,SAAS,KAAK,GAAG,EAAE;IACxB,IAAI,CAACF,KAAK,IAAI,GAAG;IACjB,IAAI,IAAI,CAACA,KAAK,GAAG,EAAE,EAAE;MACjB,IAAI,CAACE,SAAS,GAAG,GAAG;IACxB;EACJ;EAEA,IAAI,IAAI,CAACA,SAAS,KAAK,GAAG,EAAE;IACxB,IAAI,CAACF,KAAK,IAAI,GAAG;IACjB,IAAI,IAAI,CAACA,KAAK,GAAG,CAAC,EAAE,EAAE;MAClB,IAAI,CAACE,SAAS,GAAG,GAAG;IACxB;EACJ;AAEJ,CAAC;;AAED;AACA;AACA;;AAEA,SAASvB,IAAI,GAAG;EACZ,IAAI,CAACkB,CAAC,GAAGI,SAAS,CAAC,CAAC,EAAE5C,EAAE,CAAC;EACzB,IAAI,CAAC0C,CAAC,GAAGE,SAAS,CAAC,CAAC,EAAExC,EAAE,GAAG,CAAC,CAAC;EAC7B,IAAI,CAACuD,QAAQ,GAAG,CAAC;EACjB,IAAI,CAACC,OAAO,GAAGhB,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChC,IAAI,CAACiB,GAAG,GAAG,IAAI;EACf,IAAI,CAACC,SAAS,GAAG,IAAI;AACzB;AAEAxC,IAAI,CAACwB,SAAS,CAACR,IAAI,GAAG,YAAY;EAC9B,IAAIyB,KAAK,GAAG,SAAS;EACrB;EACAjE,GAAG,CAACsD,SAAS,EAAE;EACftD,GAAG,CAACwD,MAAM,CAAC,IAAI,CAACd,CAAC,EAAE,IAAI,CAACE,CAAC,GAAG,IAAI,CAACiB,QAAQ,CAAC;EAC1C7D,GAAG,CAACyD,MAAM,CAAC,IAAI,CAACf,CAAC,GAAG,IAAI,CAACmB,QAAQ,GAAG,IAAI,EAAE,IAAI,CAACjB,CAAC,CAAC;EACjD5C,GAAG,CAACyD,MAAM,CAAC,IAAI,CAACf,CAAC,GAAG,IAAI,CAACmB,QAAQ,GAAG,IAAI,EAAE,IAAI,CAACjB,CAAC,CAAC;EACjD5C,GAAG,CAACkE,SAAS,GAAGD,KAAK;EACrBjE,GAAG,CAACmE,IAAI,EAAE;EAEVnE,GAAG,CAACsD,SAAS,EAAE;EACftD,GAAG,CAACwD,MAAM,CAAC,IAAI,CAACd,CAAC,GAAG,IAAI,CAACmB,QAAQ,EAAE,IAAI,CAACjB,CAAC,CAAC;EAC1C5C,GAAG,CAACyD,MAAM,CAAC,IAAI,CAACf,CAAC,EAAE,IAAI,CAACE,CAAC,GAAG,IAAI,CAACiB,QAAQ,GAAG,IAAI,CAAC;EACjD7D,GAAG,CAACyD,MAAM,CAAC,IAAI,CAACf,CAAC,EAAE,IAAI,CAACE,CAAC,GAAG,IAAI,CAACiB,QAAQ,GAAG,IAAI,CAAC;EACjD7D,GAAG,CAACkE,SAAS,GAAGD,KAAK;EACrBjE,GAAG,CAACmE,IAAI,EAAE;EAEVnE,GAAG,CAACsD,SAAS,EAAE;EACftD,GAAG,CAACwD,MAAM,CAAC,IAAI,CAACd,CAAC,EAAE,IAAI,CAACE,CAAC,GAAG,IAAI,CAACiB,QAAQ,CAAC;EAC1C7D,GAAG,CAACyD,MAAM,CAAC,IAAI,CAACf,CAAC,GAAG,IAAI,CAACmB,QAAQ,GAAG,IAAI,EAAE,IAAI,CAACjB,CAAC,CAAC;EACjD5C,GAAG,CAACyD,MAAM,CAAC,IAAI,CAACf,CAAC,GAAG,IAAI,CAACmB,QAAQ,GAAG,IAAI,EAAE,IAAI,CAACjB,CAAC,CAAC;EACjD5C,GAAG,CAACkE,SAAS,GAAGD,KAAK;EACrBjE,GAAG,CAACmE,IAAI,EAAE;EAEVnE,GAAG,CAACsD,SAAS,EAAE;EACftD,GAAG,CAACwD,MAAM,CAAC,IAAI,CAACd,CAAC,GAAG,IAAI,CAACmB,QAAQ,EAAE,IAAI,CAACjB,CAAC,CAAC;EAC1C5C,GAAG,CAACyD,MAAM,CAAC,IAAI,CAACf,CAAC,EAAE,IAAI,CAACE,CAAC,GAAG,IAAI,CAACiB,QAAQ,GAAG,IAAI,CAAC;EACjD7D,GAAG,CAACyD,MAAM,CAAC,IAAI,CAACf,CAAC,EAAE,IAAI,CAACE,CAAC,GAAG,IAAI,CAACiB,QAAQ,GAAG,IAAI,CAAC;EACjD7D,GAAG,CAACkE,SAAS,GAAGD,KAAK;EACrBjE,GAAG,CAACmE,IAAI,EAAE;AACd,CAAC;AAED3C,IAAI,CAACwB,SAAS,CAACP,MAAM,GAAG,YAAY;EAChC,IAAI,IAAI,CAACsB,GAAG,KAAK,IAAI,EAAE;IACnB,IAAI,CAACF,QAAQ,GAAG,IAAI,CAACA,QAAQ,GAAG,IAAI,CAACG,SAAS;IAC9C,IAAI,IAAI,CAACH,QAAQ,IAAI,IAAI,CAACC,OAAO,EAAE;MAC/B,IAAI,CAACC,GAAG,GAAG,MAAM;IACrB;EACJ,CAAC,MAAM;IACH,IAAI,CAACF,QAAQ,GAAG,IAAI,CAACA,QAAQ,GAAG,IAAI,CAACG,SAAS;IAC9C,IAAI,IAAI,CAACH,QAAQ,GAAG,CAAC,EAAE;MACnB,IAAI,CAACE,GAAG,GAAG,IAAI;IACnB;EACJ;AACJ,CAAC;AAED,SAAS/B,UAAU,CAACJ,OAAO,EAAEwC,QAAQ,EAAE;EACnC,KAAKzC,GAAG,IAAIC,OAAO,EAAE;IACjBhB,MAAM,EAAE;EACZ;EACA,KAAKe,GAAG,IAAIC,OAAO,EAAE;IACjBjB,MAAM,CAACgB,GAAG,CAAC,GAAG,IAAID,KAAK,EAAE;IACzBf,MAAM,CAACgB,GAAG,CAAC,CAAC0C,MAAM,GAAG,YAAY;MAC7B,IAAI,EAAE3D,KAAK,IAAIE,MAAM,EAAE;QACnBwD,QAAQ,CAACzD,MAAM,CAAC;MACpB;IACJ,CAAC;IACDA,MAAM,CAACgB,GAAG,CAAC,CAACA,GAAG,GAAGC,OAAO,CAACD,GAAG,CAAC;EAClC;AACJ;;AAEA;AACA,SAASmB,SAAS,CAACwB,CAAC,EAAEC,CAAC,EAAE;EACrB,OAAOnB,IAAI,CAACoB,KAAK,CAACpB,IAAI,CAACqB,MAAM,EAAE,IAAIF,CAAC,GAAGD,CAAC,GAAG,CAAC,CAAC,CAAC,GAAGA,CAAC;AACtD","file":"bg.add14442.js","sourceRoot":"..\\src","sourcesContent":["const canvas = document.getElementById('bg')\r\nconst ctx = canvas.getContext('2d')\r\n\r\n// 获取当前视图的宽度和高度\r\nlet aw = document.documentElement.clientWidth || document.body.clientWidth;\r\nlet ah = document.documentElement.clientHeight || document.body.clientHeight;\r\ncanvas.width = aw;\r\ncanvas.height = ah;\r\n\r\n// 图片相关参数\r\nvar count = 0,images = {},imgNum = 0;\r\n// 文字宽高\r\nvar textW = 210, textH = 70;\r\n// 顶部星星、背景星星\r\nvar topStars = [], stars = [];\r\n\r\ninit();\r\nloadImgs();\r\nrequestAnimationFrame(animate);\r\n\r\nfunction init() {\r\n    for (let i = 0; i < 5; i++) {\r\n        topStars.push(new TopStar((aw / 5) * i + 25));\r\n    }\r\n    for (let i = 0; i < 60; i++) {\r\n        stars.push(new Star());\r\n    }\r\n}\r\n\r\nfunction loadImgs() {\r\n    var img = new Image();\r\n    img.src = './crstal/starshaow.png';\r\n    var sources = {\r\n        starshaow: \"./crstal/starshaow.png\",\r\n        text: \"./crstal/text.png\",\r\n        leaf: \"./crstal/leaf.png\",\r\n    };\r\n    //调用图片预加载\r\n    loadImages(sources, function (images) { });\r\n}\r\n\r\n\r\nfunction animate() {\r\n    ctx.clearRect(0, 0, aw, ah);\r\n\r\n    // 画文字\r\n    ctx.drawImage(images.text, aw / 2 - textW / 2, 150, textW, textH);\r\n    // 叶子\r\n    ctx.save();//保存状态\r\n    ctx.drawImage(images.leaf, 40, 490, 150, 120);\r\n    \r\n    ctx.scale(-1, 1);\r\n    ctx.translate(-aw, 0);\r\n    ctx.drawImage(images.leaf, 30, 490, 150, 120);\r\n    ctx.restore(); //恢复状态\r\n   \r\n    for (let i = 0; i < topStars.length; i++) {\r\n        topStars[i].draw();\r\n        topStars[i].update();\r\n    }\r\n\r\n    // 小星星\r\n    for (let i = 0; i < stars.length; i++) {\r\n        stars[i].draw();\r\n        stars[i].update();\r\n    }\r\n\r\n    requestAnimationFrame(animate);\r\n}\r\n\r\n/** \r\n * 创建顶部星星\r\n * */ \r\nfunction TopStar(x) {\r\n    this.w = 30;\r\n    this.x = x;\r\n    this.y = 30;\r\n    this.angle = getRandom(0, 45);\r\n    this.rotateDir = 'L';\r\n}\r\n\r\nTopStar.prototype.draw = function () {\r\n    ctx.save();//保存状态\r\n    let centerX = this.x + this.w / 2; // 中心点X\r\n    let centerY = 0;  // 中心点Y\r\n    ctx.translate(centerX, centerY);//设置画布上的(0,0)位置，也就是旋转的中心点\r\n    ctx.rotate((this.angle * Math.PI) / 180);\r\n    ctx.translate(-centerX, centerY);//设置画布上的(0,0)位置，也就是旋转的中心点\r\n    ctx.beginPath();\r\n    ctx.setLineDash([2, 3]);\r\n    ctx.moveTo(centerX, 0);\r\n    ctx.lineTo(centerX, this.y + this.w / 2);\r\n    ctx.lineWidth = 0.5;\r\n    ctx.strokeStyle = '#dfa814';\r\n    ctx.stroke();\r\n    // dots\r\n    ctx.drawImage(images.starshaow, this.x, this.y, this.w, this.w);\r\n    ctx.restore(); //恢复状态\r\n}\r\n\r\nTopStar.prototype.update = function () {\r\n    if (this.rotateDir === 'L') {\r\n        this.angle += 0.5;\r\n        if (this.angle > 45) {\r\n            this.rotateDir = 'R'\r\n        }\r\n    }\r\n\r\n    if (this.rotateDir === 'R') {\r\n        this.angle -= 0.5;\r\n        if (this.angle < -45) {\r\n            this.rotateDir = 'L'\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 创建背景星星\r\n *  */ \r\n\r\nfunction Star() {\r\n    this.x = getRandom(0, aw);\r\n    this.y = getRandom(0, ah / 3)\r\n    this.starSize = 1;\r\n    this.maxSize = getRandom(1, 4); // 纵轴长度，横轴长度是0.25倍\r\n    this.dir = 'up';\r\n    this.starSpeed = 0.06;\r\n}\r\n\r\nStar.prototype.draw = function () {\r\n    var color = '#FFCCBC'\r\n    // 围绕中心生成四个小三角形\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.x, this.y - this.starSize);\r\n    ctx.lineTo(this.x - this.starSize * 0.25, this.y);\r\n    ctx.lineTo(this.x + this.starSize * 0.25, this.y);\r\n    ctx.fillStyle = color;\r\n    ctx.fill();\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.x + this.starSize, this.y);\r\n    ctx.lineTo(this.x, this.y - this.starSize * 0.25);\r\n    ctx.lineTo(this.x, this.y + this.starSize * 0.25);\r\n    ctx.fillStyle = color;\r\n    ctx.fill();\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.x, this.y + this.starSize);\r\n    ctx.lineTo(this.x - this.starSize * 0.25, this.y);\r\n    ctx.lineTo(this.x + this.starSize * 0.25, this.y);\r\n    ctx.fillStyle = color;\r\n    ctx.fill();\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.x - this.starSize, this.y);\r\n    ctx.lineTo(this.x, this.y - this.starSize * 0.25);\r\n    ctx.lineTo(this.x, this.y + this.starSize * 0.25);\r\n    ctx.fillStyle = color;\r\n    ctx.fill();\r\n}\r\n\r\nStar.prototype.update = function () {\r\n    if (this.dir === 'up') {\r\n        this.starSize = this.starSize + this.starSpeed;\r\n        if (this.starSize >= this.maxSize) {\r\n            this.dir = 'down';\r\n        }\r\n    } else {\r\n        this.starSize = this.starSize - this.starSpeed;\r\n        if (this.starSize < 2) {\r\n            this.dir = 'up';\r\n        }\r\n    }\r\n}\r\n\r\nfunction loadImages(sources, callback) {\r\n    for (src in sources) {\r\n        imgNum++;\r\n    }\r\n    for (src in sources) {\r\n        images[src] = new Image();\r\n        images[src].onload = function () {\r\n            if (++count >= imgNum) {\r\n                callback(images);\r\n            }\r\n        }\r\n        images[src].src = sources[src];\r\n    }\r\n}\r\n\r\n// 获取随机数\r\nfunction getRandom(n, m) {\r\n    return Math.floor(Math.random() * (m - n + 1)) + n;\r\n}\r\n"]}